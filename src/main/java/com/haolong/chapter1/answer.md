### 1.1节

**R1**. 说法不同， 主机又被称为端系统。手机电脑、和手表都是 端系统。web服务器是一种端系统，因为能够容纳应用程序

> 端系统的定义： 容纳运行的应用程序

**R2**. 协议通常被描述为一组国际礼节规则。这些行之有效的历史悠久的规则使各国和人民更容易共同生活和工作。协议的一部分一直是对所有人的等级地位的认可。协议规则基于文明原则。PM Forni代表国际礼宾顾问和官员协会。
[维基百科(diplomatic protocol)](https://en.wikipedia.org/wiki/Protocol_(diplomacy))

**R3**. 如果对协议没有一个既定的标准， 那么这个协议将不被大家所承认， 无法进行统计化， 就像货币一样， 如果没有汇率这种既定的协议， 那么每个国家的货币职能在自己国家使用。
正所谓无规矩不成方圆。

### 1.2节

**R4**.

住宅： 电缆、DSL(数字用户线)、光纤(FTTH)
公司: 以太网、LAN
广域无线： 3G、4G、5G

**R5**.

> HFC被称为混合光纤同轴(Hybrid Fiber Coax) 系统。 每个地区枢纽通常支持 500~5000个家庭。

共享的， 会出现碰撞， 因为是公用相同的信道。

**R6**.

地区杭州: FTTH(光纤)

价格/月 | 上行带宽 | 下行带宽
---|--- |---
50 | 30M | 300M
60 | 30M | 500M
80 | 30M | 1000M

**R7**.

以太网是什么:
以太网是一种计算机局域网技术。IEEE组织的IEEE 802.3标准制定了以太网的技术标准，它规定了包括物理层的连线、电子信号和介质访问层协议的内容。以太网是目前应用最普遍的局域网技术，取代了其他局域网技术如令牌环、FDDI和ARCNET。

[以太网速率](http://blog.sina.com.cn/s/blog_54aa1a470101bzzt.html)

速率有高有低， 可运行在100、1000和10000Mbps那样的高速率，分别以快速以太网、千兆以太网和万兆以太网的形式呈现。

**R8**.

双绞铜线， 同轴电缆， 光纤

**R9**.

接入类型 | 上行带宽 | 下行带宽 | 共享or独占
---|--- | ---| ---
HFC(同轴电缆) | 10Mbit∕s | 10~40Mbit∕s | 共享式
DSL(数字用户线) | 12~55Mbit/s | 1.8~15Mbit/s | 独占
FTTH(光纤) | 速度不等 | 速度不等 | 独占

**R10**.

WIFI、3G、4G、5G。

首先5G的传输速度为1GB/s, 4G的传输速度为100MB/s; 和4G相比， 5G需要建设更多的基站， 建设成本高；5G采用小天线，信号强度高；和4G相比，5G网络具有低延时的特点。

WIFI需要近距离的路由器进行传输， 而3G、4G则是数百～千米远的基站接收信号。

### 1.3

**R11**.
如何忽略 排队时延、传播时延和处理时延。 端到端的总时延如果没有交换机的存在， 那么就是 R1/L , 存在交换机， 传输速率为R1 和 R2, 那么总时延为
`R1/L + R2/L`

**R12**.

> 电路交换：由于电路交换在通信之前要在通信双方之间建立一条被双方独占的物理通路（由通信双方之间的交换设备和链路逐段连接而成）

> 分组交换是以分组为单位进行传输和交换的，它是一种存储——转发交换方式，即将到达交换机的分组先送到存储器暂时存储和处理，等到相应的输出电路有空闲时再送出。

1. 时延小， 可靠性高。
2. 双方通信时按发送顺序传送数据，不存在失序问题
3. 设备较为简单

TMD比FMD的优点:

1.当发生拥塞等网络问题时， TDM 中的数据丢失可能只会是一部分，而FDM 中就可能是
大部分或全部。

2.在电路交换中时分复用能高效的使用网路。因为频分复用连接建立后，当中途没有数据传输时，他所占有的频段带宽不能被其他连接使用，故可能存在空置，而在时分复用的统计时分模式下，连接建立后，当某个连接暂时不用传输数据时可以少分时间片或者不分，即其时隙的分配时“按需分配”，这样就让出了相应的传输时间给其他连接。

**R13**.

a. 能够同时支持2个用户， 当发生空闲时， 部分资源也会进行独占</br>
b. 如果是同时3个用户进行传输的话， 并且传输的速率为1Mbps的话， 那么最高速率将达到3Mbps, 很显然在同一时间内， 此链路将无法进行同时传输， 将会进行阻塞。</br>
c. 0.2</br>
d. `0.2^3`

**R14**.

> ISP(Internet server provider) 因特网服务提供者。

> Internet eXchange Point（IXP）即互联网交换中心。

对等可以减少结算
也就是说， IXP属于内容提供商， 提供不同网络之间通讯的交换点。当接入IXP的运营商在里面交换费用都是属于免费对等的交换策略， 但是会收取一定的端口占用费。 所以在ISP层级相同的情况， 通过IXP进行数据交换会收取少量的费用。

**R15**.

内容提供商的动机是， 因为数据中心在自己手中，如果和用户进行交互的时候， 不需要经过其他运营商的ISP， 直接与自己的IXP进行交互， 所有效率会非常的快速。第二是可以减少对高层ISP服务的费用。

### 1.4节

**R16**.
首先， 时延是由 节点处理时延、排队时延、传输时延、传播时延组成。

在传输速率是不变的情况下
节点处理时延、传输时延、传播时延是固定的。
排队时延取决于当前的拥塞情况。

**R17**.

[交互应用](https://media.pearsoncmg.com/aw/ecs_kurose_compnetwork_7/cw/content/interactiveanimations/transmission-vs-propogation-delay/transmission-propagation-delay-ch1/index.html)

当length 长度达到最大的时候， 其实时间都是花费在了传播时间上面， 所有当前前面处理时延和排队时延都处理完了之后但是传播还没有到达。

当距离比较近， 并且传输速率不慢的情况下， 会出现接收方一边接收数据， 发送方一边发送数据。

**R18**.

传输时延， 没有
传播时延 2.5 * 10^6 / 2.5 * 10^8 = 0.01S<br/>
d/s<br/>
没有关系


**R19**.

R1=500kb ps(每秒) R2=2Mbps  R3=1Mbps


```
换算单位说明：

### 传输单位
Mbps 即Milionbit pro second(百万位每秒)
Kbps 即Kilobit pro second(千位每秒) 
bps 即bit pro second (位每秒) 

### 存储单位
1M = 1024kb
1kb = 1024B
1B = 8bit
```

a. min{R1, R2, R3} = 500kbps<br/>
b. (4 * 1024^6 * 8) / (500 * 1024) = 64s
c.min = 100kbps, 320s

**R20**.

当系统A发送文件到系统B的时候， 会将系统文件拆分为很多的小包， 进行发送， 当发送的时候， 会在小包里面携带ip地址信息和一些其他信息， 当到达路由器或者交换机的时候， 会对ip进行读取并且再次进行封装发送。

**21**.

500packet/s 350packet/s

流量强度： 500/350 packet/s = 1.43 > 1

第一次: 9mese, 第二次： 8.2mese. 为什么不一样， 网上说是发送数据包的随机性， 暂时不知道具体原理。

### 1.5节

**R22**.
差错控制error control，流量控制flow control，多路复用/分解multiplexing/demultiplexing，报文分段segmentation，重新装配reassembly，连接建立connection setup。
这些任务可能由多个层次执行可能，比如差错控制

**R23**.

应用层<br/>
运输层<br/>
网络层<br/>
链路层<br/>
物理层

简要描述一下：主要去参照1.5.1讲解的作用。
> 应用层： 对运输层的数据进行自我封装成各自的协议进行交互， 如HTTP协议， SMTP协议和TCP协议。 最重要的还有DNS域名解析

> 运输层：在应用程序端点之间传输数据, 进行多路复用和多路分解。 UDP和TCP协议，TCP向应用程序提供了面向连接的服务。 这种服务包括了应用层报文提供了 可靠数据传输和用塞控制以及流量控制。

> 网络层: ip地址解析和ip协议，路由表的存储和目的地转发。 数据平面和控制平面，

> 链路层: 后续补充说明

> 物理层: 后续补充说明

**R24**.

应用层消息：应用要发送并传递到传输层的数据；
传输层段：由传输层生成，用传输层头封装应用层消息；
网络层数据报：用网络层头封装传输层段；
链路层框架：用链路层报头封装网络层数据报。

**R25**.

路由器：网络层/链路层/物理层<br/>
链路层交换机: 链路层/物理层<br/>
主机处理: 5层协议

### 1.6节
**R26**.

病毒： 需要某种形式的用户交互来感染用户设备<br/>
蠕虫：无需用户交互就能进入设备的恶意软件， 能够扫描附件的网络和端口进行感染

**R27**.

通过大量的病毒或者蠕虫进行恶意攻击用户端系统， 来达到一定规模的僵尸网络。进行恶意的统一DDoS分布式
拒绝网络攻击。

**R28**.

Trudy其实充当的是路由器或者链路交换机的角色。 可以进行数据修改来达到控制双方的目的。

### 习题

**P1**.

**自动柜员机**&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  **中央计算机**

发送用户卡信息&nbsp;&nbsp;&nbsp;&nbsp;       校验用户卡是否是正确的的卡，验证卡是否异常

输入密码信息&nbsp;&nbsp;&nbsp;&nbsp;   校验卡号密码是否正确

查询账目结算发送用户卡和卡密等信息 &nbsp;&nbsp;&nbsp;&nbsp;   校验信息是否正确

**P2**.

N段链路所以每一段需要进行一次传输， N - 1. 总共有P个分组

`((N - 1 + P) * L) / R`

**P3**.

a.电路交换， 稳定， 并且发送的数据固定。

b.不需要， 小于 1

**P4**.

a. 4条

b.<br/>
a -> b  4条<br/>
b -> c  4条<br/>

a -> d 4条<br/>
d -> c 4条<br/>
==总共8条==

c. 可以容纳<br/>
a -> b(2) -> c(2)<br/>
a -> d(2) -> c(2)<br/>
b -> c(2) -> d(2)<br/>
c -> a(2) -> d(2)

**P5**.

a. (12s * 10) + (150 / 100)/h = 96min

b. (12s * 8) + (150 / 100)/h = 94.8min

**p6**.

a. `m/s`<br/>
b. `L/R`<br/>
c. `m/s` + `L/R`<br/>
d. 刚离开A<br/>
e. 链路上<br/>
f. A主机<br/>
g. `m/s` + `L/R` = `120 * 2.5 * 10^8` / `56 * 1000` = 536km

**p7**

(56 * 8) / (64 * 10^3) = 7ms

(56 * 8) / (2 * 10^6) = 0.224ms

总计时常： 17.224ms

**p8**.

a. 20

b. 10%

c.


**p9**.

a. 10000


**p10**.

`L/R1 + L/R2 + L/R3 + d1/s1 + d2/s2 + d3/s3 + dprod + dprod`

合计 40 + 18 + 6 = 64ms;

**p11**.

去掉2个路由传输时延， 46ms;

**p12**.

`((4 + 0.5) * 1500 * 8) / 2000000` = 27ms;

`(nL + L-x) / R`

**P13**.

a.
```math
 \tfrac{\tfrac{L}{R} + \tfrac{2L}{R} + ... + \tfrac{NL}{R}}{NR}
 
  \tfrac{L + 2L + ... + (M-1)L}{NR}
  
  (1 + 2 ... + (N-1)) * \tfrac{L}{NR}
  
  \tfrac{n(n-1)}{2} * \tfrac{L}{NR}
  
  \tfrac{Ln(n-1)}{2NR}
  
  \tfrac{LN^2 - Ln}{2NR}
  
  \tfrac{L(n-1)}{2R}

```

b. LN / R秒有N个分组同时到达， 所有每次都是 `$\tfrac{L(n-1)}{2R}$`

**P14.**

a.

```math
    
    \tfrac{IL}{R(i-I)} + \tfrac{L}{R}
    
    \tfrac{IL}{R(1 - I)} + \tfrac{L(i - I)}{R(i-i)}
    
    \tfrac{\tfrac{L}{R}}{1-I}
    
```


**P15.**

```math
    
    \tfrac{\tfrac{L}{R}}{1-(\tfrac{la}{R})}
    
    \tfrac{L}{R - la}
    
    \tfrac{1}{\tfrac{R}{L} - a}
    
    \tfrac{1}{u - a}
    
```

**P16.**

1 + 10 = a(10ms + 10ms) = 550 packets/sec

**P17.**

a.
```math

(dproc + dtrans + dprod)N  当N是固定的时候

\sum_{n-1}^{q}[d^q_{proc} + d^q_{trans} + d^q_{prod}]

```

d.
```math
    \sum_{n-1}^{q}[d^q_{proc} + d^q_{trans} + d^q_{prod} + d^q_{queue}]
```


**p18.**

  ```
  浙江杭州阿里云主机 tcp baidu.com (21:56 测试结果)
  115.236.101.214 中国浙江杭州 chinatelecom.com.cn 电信 6.4
  115.236.101.210 中国浙江杭州 chinatelecom.com.cn 电信 6.5
  220.191.200.223 中国浙江杭州 chinatelecom.com.cn 电信 10.6
  220.191.199.41  中国浙江杭州 chinatelecom.com.cn 电信 7.6
  220.191.200.17  中国浙江杭州 chinatelecom.com.cn 电信 7.2
  202.97.102.205  中国天津 chinatelecom.com.cn 电信    37.3
  202.97.122.57   中国天津 chinatelecom.com.cn 电信    38.2
  36.110.245.110  中国北京 chinatelecom.com.cn 电信    39.8
  36.110.245.66   中国北京 chinatelecom.com.cn 电信    39.9
  36.110.246.65   中国北京 chinatelecom.com.cn 电信    36.2
  220.181.182.166  中国北京 chinatelecom.com.cn 电信   35.2
  106.38.244.154  中国北京 chinatelecom.com.cn 电信    33.4
  220.181.38.251  中国北京 chinatelecom.com.cn 电信    31.8
  ```
  
c. 在相邻的ISP之间出现了最大的时延
**中国浙江杭州 chinatelecom.com.cn 电信 - 中国天津 chinatelecom.com.cn 电信 = 相差24.7ms**

d. 测试地区，印度孟买阿里云 到 google.com
```
 22:03 第一次测试结果
 经过5锻链路到达，总耗时1.3ms
 经过的路径依次为:
 103.27.170.10    印度马哈拉施特拉邦孟买 webwerks.in     1.7
 103.77.108.82    印度马哈拉施特拉邦孟买 extreme-ix.org  3.7ms,2.4ms
 108.170.248.177  印度马哈拉施特拉邦孟买 google.com      3ms,3ms
 108.170.248.161  印度马哈拉施特拉邦孟买 google.com      1.6ms
 216.239.54.147   印度马哈拉施特拉邦孟买 google.com      2.8ms,2.9ms,2.8ms
 216.58.203.46    中国香港 google.com                 1.3ms,1.2ms,1.3ms
```

**19.**

a.
```
地址 Franc国家 traceroute google.com(错了，需要固定ip进行测试)

第一次结果: AS8839
1	wblindix.sdv.fr      	212.95.66.126      	0.091 ms
2	border-gateway2.sdv.fr      	212.95.69.227      	0.71 ms
3	th2-10g-0003.sdv.fr      	212.95.64.54      	6.858 ms
4	google2.par.franceix.com.haolong.net      	37.49.236.2      	6.902 ms
5	108.170.245.1      	108.170.245.1      	7.719 ms
6	142.251.49.133      	142.251.49.133      	6.763 ms
7	par21s19-in-f14.1e100.com.haolong.net      	142.250.179.78      	6.709 ms    


第二次结果:AS30781

85.31.192.253  be3-200.hr01-corp.mar02.jaguar-network.com.haolong.net  0.904 ms
78.153.231.2   be4.cr02.mar02.jaguar-network.com.haolong.net         0.976 ms
85.31.194.207  be1.er03.mar02.jaguar-network.com.haolong.net    0.825 ms
37.49.232.5    

```


**p20.**

```math

    min\{R_s, R_c, \tfrac{R}{M}\}
    
```

**p21.**

a.

```math

    max\{min\{R^1_1, R^1_2, R^1_3...R^1_n\}, min\{R^2_1, R^2_2, R^1_3...R^2_n\}, min\{R^m_1, R^m_2, R^1_3...R^m_n\}\}
    
```

b.

```math
    
    \sum_{k=1}^{m}min\{R^k_1, R^k_2, ...R^k_n\}

```

**p22**.

`(1-p)^n`


`$\tfrac{1}{ps}-1$`

**p23**.

a.`$\tfrac{L}{RS}$`

b. 可能， 会进行堆积， `$\tfrac{L}{RC}$` < `$\tfrac{L}{RS}$`

**p24**.
```math

\tfrac{40 * 10^{12}}{100 * 10^6} = 37day

```
时间太长了。选择FedEx

**p25**.

a.
```math

2 * 10^6 * (\tfrac{2.5 * 10^8}{2 * 10^7}) = 16 * 10^4 bit

```

b.16 * 10^4 bit

c. 链路的传播速度 * 速率 = 最大传输的比特数

d.
`$\tfrac{2 * 10^7}{160000} = 0.25m$`

e.

```math

   \tfrac{M}{\tfrac{M}{S} * R} = \tfrac{S}{R}  

```

**26**.

```math

   \tfrac{S}{R}  = 2 * 10^7
   
   R = \tfrac{2.5 * 10^8}{2 * 10^7}
   
   R = 12.5bps

```

**27**.

a. 160000 * 500 = 8 * 10^7

b. 800000, 最多只有这个多数据可以发送

c. 0.25m

**28**.

a.`$P_{trans} = 80ms$` + `$P_{proc} = 400ms$` = 480ms

b. 20 * (20 + 80) = 2s

c. a速度最快， 但是B也不是不好， 在特定的时候也可以这样处理。

**29**

a. `$\tfrac{36 * 10^6}{24 * 10^6} = 15ms$`

b. `$0.15 * 10 ^ 7 = 1500000bit$`

c. `$\tfrac{60}{0.15} * 1500000 = 6 * 10^8$`

**31**.

a.
`$\tfrac{8 * 10^6}{2 * 10^6} = 4s$`, 4 * 3 = 12s

b. 5ms, 10ms

c. 4S + 10ms = 4.01s

d. 减少容错， 丢包问题

e. 当网络不稳定时， 会出现数据丢失， 也就是丢包。

**32**.

[资源链接](https://media.pearsoncmg.com/aw/ecs_kurose_compnetwork_7/cw/content/interactiveanimations/transmission-vs-propogation-delay/transmission-propagation-delay-ch1/index.html)

相当的， 传播时延会影响到整个端到端的总时延。

**33**.

3L/R
**34**.

协议转换和IXP数据交换

